!function(){var t,e,s;!function(n){function i(t,e){return w.call(t,e)}function a(t,e){var s,n,i,a,o,l,u,r,g,d,p,c,m=e&&e.split("/"),h=b.map,f=h&&h["*"]||{};if(t){for(t=t.split("/"),o=t.length-1,b.nodeIdCompat&&x.test(t[o])&&(t[o]=t[o].replace(x,"")),"."===t[0].charAt(0)&&m&&(c=m.slice(0,m.length-1),t=c.concat(t)),g=0;g<t.length;g++)if(p=t[g],"."===p)t.splice(g,1),g-=1;else if(".."===p){if(0===g||1===g&&".."===t[2]||".."===t[g-1])continue;g>0&&(t.splice(g-1,2),g-=2)}t=t.join("/")}if((m||f)&&h){for(s=t.split("/"),g=s.length;g>0;g-=1){if(n=s.slice(0,g).join("/"),m)for(d=m.length;d>0;d-=1)if(i=h[m.slice(0,d).join("/")],i&&(i=i[n])){a=i,l=g;break}if(a)break;!u&&f&&f[n]&&(u=f[n],r=g)}!a&&u&&(a=u,l=r),a&&(s.splice(0,l,a),t=s.join("/"))}return t}function o(t,e){return function(){var s=j.call(arguments,0);return"string"!=typeof s[0]&&1===s.length&&s.push(null),m.apply(n,s.concat([t,e]))}}function l(t){return function(e){return a(e,t)}}function u(t){return function(e){y[t]=e}}function r(t){if(i(v,t)){var e=v[t];delete v[t],C[t]=!0,c.apply(n,e)}if(!i(y,t)&&!i(C,t))throw new Error("No "+t);return y[t]}function g(t){var e,s=t?t.indexOf("!"):-1;return s>-1&&(e=t.substring(0,s),t=t.substring(s+1,t.length)),[e,t]}function d(t){return t?g(t):[]}function p(t){return function(){return b&&b.config&&b.config[t]||{}}}var c,m,h,f,y={},v={},b={},C={},w=Object.prototype.hasOwnProperty,j=[].slice,x=/\.js$/;h=function(t,e){var s,n=g(t),i=n[0],o=e[1];return t=n[1],i&&(i=a(i,o),s=r(i)),i?t=s&&s.normalize?s.normalize(t,l(o)):a(t,o):(t=a(t,o),n=g(t),i=n[0],t=n[1],i&&(s=r(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:s}},f={require:function(t){return o(t)},exports:function(t){var e=y[t];return"undefined"!=typeof e?e:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:p(t)}}},c=function(t,e,s,a){var l,g,p,c,m,b,w,j=[],x=typeof s;if(a=a||t,b=d(a),"undefined"===x||"function"===x){for(e=!e.length&&s.length?["require","exports","module"]:e,m=0;m<e.length;m+=1)if(c=h(e[m],b),g=c.f,"require"===g)j[m]=f.require(t);else if("exports"===g)j[m]=f.exports(t),w=!0;else if("module"===g)l=j[m]=f.module(t);else if(i(y,g)||i(v,g)||i(C,g))j[m]=r(g);else{if(!c.p)throw new Error(t+" missing "+g);c.p.load(c.n,o(a,!0),u(g),{}),j[m]=y[g]}p=s?s.apply(y[t],j):void 0,t&&(l&&l.exports!==n&&l.exports!==y[t]?y[t]=l.exports:p===n&&w||(y[t]=p))}else t&&(y[t]=s)},t=e=m=function(t,e,s,i,a){if("string"==typeof t)return f[t]?f[t](e):r(h(t,d(e)).f);if(!t.splice){if(b=t,b.deps&&m(b.deps,b.callback),!e)return;e.splice?(t=e,e=s,s=null):t=n}return e=e||function(){},"function"==typeof s&&(s=i,i=a),i?c(n,t,e,s):setTimeout(function(){c(n,t,e,s)},4),m},m.config=function(t){return m(t)},t._defined=y,s=function(t,e,s){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(s=e,e=[]),i(y,t)||i(v,t)||(v[t]=[t,e,s])},s.amd={jQuery:!0}}(),s("../node_modules/almond/almond",function(){}),s("tastyplug",[],function(){"use strict";function t(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"undefined"==typeof window.tastyPlugShutDown&&"undefined"==typeof window.tplug||window.tastyPlugShutDown(),window.tplug={version:"<%= version %>",baseURL:"<%= tastyplug_base_url %>",settings:{visible:!0,autoWoot:!0,autoJoin:!1,hideVideo:!1,legacyChat:!1,boothAlert:!1,historyAlert:!1,mehTracker:!1,customEmotes:!0,tastyMojis:{enabled:!1,type:"ios"},chatMentions:{enabled:!1,mentions:["@tastyplug",API.getUser().username]},joinNotifications:{enabled:!1,ranks:!1,friends:!1,levelOnes:!1},uiPos:{top:"69px",left:"15px"}},session:{votes:{}},events:{plug:{_advance:function(t){var e=API.getDJ(),s=API.getUser(),n=API.getHistory().map(function(t){return t.media.cid});tplug.session.votes={},delete tplug.session.boothTriggered,tplug.settings.autoWoot&&!s.vote&&e&&e.id!=s.id&&$("#woot").click(),tplug.settings.autoJoin&&tplug.utils.autoJoinCheck(),e&&tplug.settings.historyAlert&&Math.max(s.gRole,s.role)>1&&n.indexOf(t.media.cid)!=-1&&tplug.utils.addChat({type:"warning",message:"is playing a song from the History!<br />It was played "+(n.indexOf(t.media.cid)+1)+" songs ago.",icon:"chat-system",user:API.getHistory()[n.indexOf(t.media.cid)].user})},chatCommand:function(t){var e={name:t.split(" ")[0].substr(1).toLowerCase(),args:t.split(" ").splice(1)};"/"==e.name.charAt(0)&&(e.name=e.name.substr(1));for(var s=API.getUser(),n=Object.keys(tplug.commands),i=0;i<n.length;i++)if(tplug.commands[n[i]].names.indexOf(e.name)!=-1&&Math.max(s.role,s.gRole)>=tplug.commands[n[i]].role)return tplug.commands[n[i]].run(t,e,s)},userJoin:function(t){6141149==t.id&&5==t.gRole;var e=API.getUser(),s={5:"the Host",4:"a Co-Host",3:"a Manager",2:"a Bouncer",1:"a Resident DJ"},n={5:"a plug.dj Admin",3:"a Brand Ambassador"};t.username+=",",tplug.settings.joinNotifications.enabled&&(Math.max(t.gRole,t.role)>0&&tplug.settings.joinNotifications.ranks?tplug.utils.addChat({type:"join-"+(5==t.gRole?"admin":3==t.gRole?"ambassador":"staff"),message:(t.gRole>0?n[t.gRole]:s[t.role])+", has joined the room!",icon:"chat-"+(5==t.gRole?"admin":3==t.gRole?"ambassador":t.role>3?"host":3==t.role?"manager":2==t.role?"bouncer":"dj"),user:t}):t.friend&&tplug.settings.joinNotifications.friends?tplug.utils.addChat({type:"friend",message:"your friend, has joined the room!",icon:"community-users",user:t}):1==t.level&&tplug.settings.joinNotifications.levelOnes&&Math.max(e.gRole,e.role)>1&&tplug.utils.addChat({type:"levelOne",message:"a level 1 user, has joined the room!",icon:"community-users",user:t}))},_voteUpdate:function(t){if(t.vote==-1){var e=API.getUser();if(tplug.settings.mehTracker&&!(Math.max(e.role,e.gRole)<2)){tplug.session.votes[t.user.id]||(tplug.session.votes[t.user.id]=0),tplug.session.votes[t.user.id]++;var s=$(".tp.tp-meh.id-"+t.user.id+".history-"+tplug.modules.media.get("historyID")).last();s.length?s.find(".text").text("has meh'd the song! ("+tplug.session.votes[t.user.id]+"x)"):tplug.utils.addChat({type:"meh id-"+t.user.id+" history-"+tplug.modules.media.get("historyID"),message:"has meh'd the song!",icon:"meh",user:t.user})}}},waitListUpdate:function(t){var e=API.getUser(),s=t.map(function(t){return t.id});tplug.settings.autoJoin&&tplug.utils.autoJoinCheck(),tplug.settings.boothAlert&&(2!=s.indexOf(e.id)||tplug.session.boothTriggered||(tplug.utils.addChat({type:"info-small",message:"You're at spot 3 on the waitlist!<br />Remember to choose your song.",icon:"join-waitlist",sound:"mention",user:API.getUser()}),tplug.session.boothTriggered=!0))}},modules:{preChat:function(t){if(t.type.indexOf("log")==-1&&t.type.indexOf("welcome")==-1&&t.type.indexOf("system")==-1&&t.type.indexOf("moderation")==-1&&t.type.indexOf("rsshit")==-1){var e=tplug.modules.waitlist,s=API.getUser(),n=API.getUser(t.uid);t.msg=t.message.replace(/<(.|\n)*?>/gi,""),t.type.indexOf("emote")==-1&&t.type.indexOf("undefined")==-1||(t.message.indexOf("@"+API.getUser().username)!=-1?(t.message=t.message.replace(new RegExp("@"+s.username,"g"),'<span class="name">@'+s.username+"</span>"),t.sound="mention"):n.id!=s.id&&Math.max(n.role,n.gRole)>=3&&(t.msg.indexOf("@everyone")!=-1||t.msg.indexOf("@staff")!=-1||t.msg.indexOf("@hosts")!=-1||t.msg.indexOf("@managers")!=-1||t.msg.indexOf("@bouncers")!=-1||t.msg.indexOf("@rdjs")!=-1||t.msg.indexOf("@djs")!=-1)&&(t.message.indexOf("@everyone")!=-1?(t.message=t.message.replace(new RegExp("@everyone","g"),'<span class="name">@everyone</span>'),t.sound="mention"):t.message.indexOf("@staff")!=-1&&s.role?(t.message=t.message.replace(/@staff/g,'<span class="name">@staff</span>'),t.sound="mention"):t.message.indexOf("@hosts")!=-1&&s.role>=4?(t.message=t.message.replace(/@hosts/g,'<span class="name">@hosts</span>'),t.sound="mention"):t.message.indexOf("@managers")!=-1&&3==s.role?(t.message=t.message.replace(/@managers/g,'<span class="name">@managers</span>'),t.sound="mention"):t.message.indexOf("@bouncers")!=-1&&2==s.role?(t.message=t.message.replace(/@bouncers/g,'<span class="name">@bouncers</span>'),t.sound="mention"):t.message.indexOf("@rdjs")!=-1&&1==s.role?(t.message=t.message.replace(/@rdjs/g,'<span class="name">@rdjs</span>'),t.sound="mention"):t.message.indexOf("@djs")!=-1&&e.isTheUserWaiting&&(t.message=t.message.replace(/@djs/g,'<span class="name">@djs</span>'),t.sound="mention"))),tplug.settings.chatMentions.enabled&&tplug.settings.chatMentions.mentions.length&&tplug.utils.customMentions(t),tplug.settings.customEmotes&&tplug.utils.customEmotes(t)}},postChat:function(t){if(t.type.indexOf("log")==-1&&t.type.indexOf("welcome")==-1&&t.type.indexOf("system")==-1&&t.type.indexOf("moderation")==-1&&t.type.indexOf("rsshit")==-1){var e=API.getUser(),s=API.getUser(t.uid),n=[];if(t.msg=t.message.replace(/<(.|\n)*?>/gi,""),tplug.settings.chatMentions.enabled&&tplug.settings.chatMentions.mentions.length)for(var i=0;i<tplug.settings.chatMentions.mentions.length;i++)t.msg.match(new RegExp("\\b("+tplug.settings.chatMentions.mentions[i].trim()+")\\b","gi"))&&n.indexOf(tplug.settings.chatMentions.mentions[i].trim())==-1&&n.push(tplug.settings.chatMentions.mentions[i].trim());(t.type.indexOf("emote")!=-1&&(Math.max(s.gRole,s.role)>=3&&t.uid!=e.id&&null!=t.msg.match(/@(everyone|djs|staff|rdjs|bouncers|managers|hosts)(\,|\.|\!|\?|\ |$)/gi)||t.msg.indexOf("@"+e.username)!=-1)||n.length&&t.msg.match(new RegExp("\\b("+n.join("|")+")\\b","gi")))&&($("[data-cid^='"+t.cid+"']").length?($("[data-cid^='"+t.cid+"']").addClass("mention"),$("[data-cid^='"+t.cid+"']").addClass(5==e.gRole?"is-admin":3==e.gRole?"is-ambassador":e.role?"is-staff":e.sub?"is-subscriber":e.silver?"is-subscriber silver":"is-you")):($(".cid-"+t.cid).parent().parent().addClass("mention"),$(".cid-"+t.cid).parent().parent().addClass(5==e.gRole?"is-admin":3==e.gRole?"is-ambassador":e.role?"is-staff":e.sub?"is-subscriber":e.silver?"is-subscriber silver":"is-you")));var a=$("#chat-messages"),o=a.scrollTop()>a[0].scrollHeight-a.height()-28;o&&a.scrollTop(a[0].scrollHeight)}},roomJoined:function(){tplug.ui.unload(),tplug.ui.load()}}},commands:{lock:{names:["lock","unlock"],role:3,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands)return tplug.modules.booth.toJSON().isLocked&&"lock"==e.name?tplug.utils.addChat({type:"error",message:"The WaitList is already locked!",icon:"chat-system"}):tplug.modules.booth.toJSON().isLocked||"unlock"!=e.name?tplug.utils.ajax({type:"PUT",url:"/_/booth/lock",data:{isLocked:"lock"==e.name,removeAllDJs:!1}}):tplug.utils.addChat({type:"error",message:"The WaitList is already unlocked!",icon:"chat-system"})}},cycle:{names:["cycle"],role:3,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands){var n=tplug.modules.booth.toJSON().shouldCycle;return tplug.utils.ajax({type:"PUT",url:"/_/booth/cycle",data:{shouldCycle:!n}})}}},ban:{names:["ban"],role:3,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands){var n=tplug.utils.getUser(e.args.join(" "));return"undefined"==typeof n&&isNaN(parseInt(e.args[0]))?tplug.utils.addChat({type:"error",message:"User not found.",icon:"chat-system"}):isNaN(parseInt(e.args[0]))?Math.max(n.role,n.gRole)?tplug.utils.addChat({type:"error",message:"You shouldn't ban those with ranks!",icon:"chat-system"}):tplug.utils.ajax({type:"POST",url:"/_/bans/add",data:{userID:n.id,reason:1,duration:"f"}}):tplug.utils.ajax({type:"POST",url:"/_/bans/add",data:{userID:parseInt(e.args[0]),reason:1,duration:"f"}})}}},kick:{names:["kick"],role:2,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands){var n={60:"h",1440:"d",h:"h",hour:"h","short":"h",d:"d",day:"d","long":"d"},i=n[e.args[e.args.length-1]]?n[e.args.pop()]:"h",a=tplug.utils.getUser(e.args.join(" "));return"undefined"==typeof a&&isNaN(parseInt(e.args[0]))?tplug.utils.addChat({type:"error",message:"User not found.",icon:"chat-system"}):isNaN(parseInt(e.args[0]))?Math.max(a.role,a.gRole)?tplug.utils.addChat({type:"error",message:"You shouldn't kick those with ranks!",icon:"chat-system"}):tplug.utils.ajax({type:"POST",url:"/_/bans/add",data:{userID:a.id,reason:1,duration:i}}):tplug.utils.ajax({type:"POST",url:"/_/bans/add",data:{userID:parseInt(e.args[0]),reason:1,duration:i}})}}},mute:{names:["mute"],role:2,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands){var n={15:"s",30:"m",45:"l","short":"s",medium:"m","long":"l",s:"s",m:"m",l:"l"},i=n[e.args[e.args.length-1]]?n[e.args.pop()]:"s",a=tplug.utils.getUser(e.args.join(" "));if(!a)return tplug.utils.addChat({type:"error",message:"User not found.",icon:"chat-system"});if(!(("/tastycat"==location.pathname&&s.role>=3||("/tastycat"!=location.pathname&&Math.max(s.role,s.gRole))>=3)&&3>Math.max(a.role,a.gRole)&&Math.max(a.role,a.gRole)>0)){if(Math.max(a.gRole,a.role)>=3)return;return tplug.utils.ajax({type:"POST",url:"/_/mutes",data:{userID:a.id,reason:1,duration:i}})}tplug.utils.ajax({type:"DELETE",url:"/_/staff/"+a.id},function(){tplug.utils.ajax({type:"POST",url:"/_/mutes",data:{userID:a.id,reason:1,duration:i}},function(){tplug.utils.ajax({type:"POST",url:"/_/staff/update",data:{userID:a.id,roleID:a.role}})})})}}},whois:{names:["whois"],role:0,run:function(t,e,s){if("undefined"==typeof window.rcs||!window.rcs.settings.slashCommands){var n=tplug.utils.getUser(e.args.length?e.args.join(" "):void 0);if(!n)return tplug.utils.addChat({type:"error",message:"User not found.",icon:"chat-system"});var i='<span class="title">User Information:</span><br /></br />';i+="<span>Username: </span>"+n.username+"<br />",i+="<span>User ID: </span>"+n.id+"<br />",i+="<span>Level: </span>"+n.level+"<br />",i+="<span>Language: </span>"+("en"==n.language?tplug.modules.lang.languages[n.language].split("(")[0].trim():tplug.modules.lang.languages[n.language])+"<br />";var a=[];[3703511,6141149].indexOf(n.id)!=-1&&a.push("tastyPlug Maintainer"),5==n.gRole?a.push("plug.dj Admin"):3==n.gRole&&a.push("Brand Ambassador"),n.role&&a.push(["Resident DJ","Bouncer","Manager","Co-Host","Host"][n.role-1]),n.sub&&a.push("Gold Subscriber"),n.silver&&a.push("Silver Subscriber"),a.push("User"),i+="<span>Roles: </span>"+a.join(", ")+"<br />";var o=API.getWaitListPosition(n.id);o!=-1&&(i+="<span>WaitList Position: </span>"+(o+1)),tplug.utils.addChat({type:"whois",message:i,icon:"community-users"})}}},profile:{names:["profile"],role:0,run:function(t,e,s){var n=tplug.utils.getUser(e.args.length?e.args.join(" "):void 0);return n?void tplug.utils.ajax({url:"/_/users/"+n.id},function(t,e){if(!t){e=e.data[0];var s=location.origin+"/@/"+e.slug;tplug.utils.addChat({type:"info-small",message:'Profile URL: <a href="'+s+'" target="_blank">@'+e.username+"</a>",icon:"community-users"})}}):tplug.utils.addChat({type:"error",message:"User not found.",icon:"chat-system"})}},link:{names:["link"],role:0,run:function(t,e,s){var n=API.getMedia();n&&(1==n.format?tplug.utils.addChat({type:"info-small",message:'<a target="_blank" href="https://youtu.be/'+n.cid+'">'+n.author+" - "+n.title+"</a>",icon:"chat-system"}):tplug.utils.fetchJSON("https://api.soundcloud.com/tracks/"+n.cid+"?client_id=bd7fb07288b526f6f190bfd02b31b25e",function(t,e){t||tplug.utils.addChat({type:"info-small",message:'<a target="_blank" href="'+e.permalink_url+'">'+n.author+" - "+n.title+"</a>",icon:"chat-system"})}))}},pic:{names:["pic"],role:0,run:function(t,e,s){var n=API.getMedia();if(n)if(1==n.format){var i=new Image;i.onload=function(){tplug.utils.scrollChat()},tplug.utils.addChat({type:"info-small",message:'Thumbnail: <br /><a target="_blank" href="https://i1.ytimg.com/vi/'+n.cid+'/maxresdefault.jpg"><img src="https://i1.ytimg.com/vi/'+n.cid+'/maxresdefault.jpg" style="max-width: 200px"></a>',icon:"chat-system"}),i.src="https://i1.ytimg.com/vi/"+n.cid+"/maxresdefault.jpg"}else tplug.utils.fetchJSON("https://api.soundcloud.com/tracks/"+n.cid+"?client_id=bd7fb07288b526f6f190bfd02b31b25e",function(t,e){if(!t){var s=new Image;s.onload=function(){tplug.utils.scrollChat()},tplug.utils.addChat({type:"info-small",message:'Thumbnail: <br /><a target="_blank" href="'+e.artwork_url+'"><img src="'+e.artwork_url+'" style="max-width: 200px"></a>',icon:"chat-system"}),s.src="https://i1.ytimg.com/vi/"+n.cid+"/maxresdefault.jpg"}})}},disable:{names:["disable","kill","shutdown"],role:0,run:function(t,e,s){tplug.shutdown()}}},utils:{getUser:function(t){if("undefined"==typeof t||null==t)return API.getUser();t="@"==t.charAt(0)?t.substr(1):t;var e=API.getUsers().filter(function(e){return e.username==t?e:e.username==t.trim()?e:e.username.toLowerCase()==t.toLowerCase()?e:e.username.toLowerCase()==t.toLowerCase().trim()?e:e.id==parseInt(t)?e:void 0});return e[0]},ajax:function(t,s){if(t&&"object"==("undefined"==typeof t?"undefined":e(t))&&t.url){var n=$.ajax({type:t.type||"GET",url:t.url,contentType:t.data?"application/json":void 0,data:t.data?JSON.stringify(t.data):void 0});s&&"function"==typeof s&&(n.done(function(t){s(null,t)}),n.fail(function(t,e){s({jqXHR:t,textStatus:e})}))}},addChat:function(t){var e=tplug.modules.util.getChatTimestamp(!1),s={type:"tp tp-"+(t.type?t.type:"log"),message:t.message||"Missing string",uid:t.user&&t.user.id?t.user.id:1e7,un:t.user&&t.user.username?t.user.username:"tastyPlug",timestamp:e,cid:"tp-"+(t.user&&t.user.id?t.user.id:1e7)+"-"+Math.floor(0x4bffe996c5d15*Math.random()),sound:t.sound?t.sound:void 0};tplug.modules.chat.chatView.onReceived(s),$("[data-cid="+s.cid+"] .delete-button").off().remove(),$("[data-cid="+s.cid+"] .badge-box").children().remove(),$("[data-cid="+s.cid+"] .badge-box").removeClass("no-badge"),t.special?$("[data-cid="+s.cid+"] .badge-box").append("<i class='tp-icon-"+(t.icon||"default")+"'></i>"):$("[data-cid="+s.cid+"] .badge-box").append("<i class='icon icon-"+(t.icon||"drag-media")+"'></i>"),$("#chat-messages").scrollTop($("#chat-messages").prop("scrollHeight"))},loadEmotes:function(){var t=/{image_id}/,s={tp:"https://emotes.tastycat.org/emotes.json",rcs:"https://code.radiant.dj/require/emotes/radiant_emotes.json",twitch:"https://twitchemotes.com/api_cache/v2/global.json",twitchSub:"https://twitchemotes.com/api_cache/v2/subscriber.json"};tplug.emotes&&"object"==e(tplug.emotes)||(tplug.emotes={}),tplug.utils.fetchJSON(s.twitchSub,function(e,n){if(e)tplug.utils.addChat({type:"error",message:"Twitch Sub Emotes could not be loaded.",icon:"chat-system"});else for(var i in n.channels)if(n.channels.hasOwnProperty(i))for(var a=n.channels[i].emotes,o=0;o<a.length;o++)tplug.emotes[a[o].code.toLowerCase()]=n.template.small.replace(t,a[o].image_id);tplug.utils.fetchJSON(s.twitch,function(e,n){if(e)tplug.utils.addChat({type:"error",message:"Twitch Global Emotes could not be loaded.",icon:"chat-system"});else for(var i in n.emotes)tplug.emotes[i.toLowerCase()]=n.template.small.replace(t,n.emotes[i].image_id);tplug.utils.fetchJSON(s.rcs,function(t,e){if(t)tplug.utils.addChat({type:"error",message:"RCS Emotes could not be loaded.",icon:"chat-system"});else for(var n in e.emotes)for(var i in e.emotes[n])tplug.emotes[i.toLowerCase()]="https://cdn.radiant.dj/rcs/emotes/img/"+e.emotes[n][i];tplug.utils.fetchJSON(s.tp,function(t,e){if(t)tplug.utils.addChat({type:"error",message:"tastyPlug Emotes could not be loaded.",icon:"chat-system"});else for(var s in e.emotes)tplug.emotes[s.toLowerCase()]=e.emotes[s]})})})})},fetchJSON:function(t,e){e&&"function"==typeof e&&$.ajax({type:"GET",url:t}).success(function(t){e(null,t)}).fail(function(t){e("no json for you")})},replace:function(t,s){if("object"!=("undefined"==typeof s?"undefined":e(s)))return t;var n=Object.keys(s);return n.forEach(function(e){t=t.split("%%"+e.toUpperCase()+"%%").join(s[e])}),t},loadEvents:function(){API.on(tplug.events.plug),null!=tplug.modules.events&&(tplug.modules.events.on("chat:receive",tplug.events.modules.preChat),tplug.modules.events._events["chat:receive"].unshift(tplug.modules.events._events["chat:receive"].pop()),tplug.modules.events.on("chat:receive",tplug.events.modules.postChat),tplug.modules.events.on("room:joined",tplug.events.modules.roomJoined))},unloadEvents:function(){API.off(tplug.events.plug),null!=tplug.modules.events&&(tplug.modules.events.off("chat:receive",tplug.events.modules.preChat),tplug.modules.events.off("chat:receive",tplug.events.modules.postChat),tplug.modules.events.off("room:joined",tplug.events.modules.roomJoined))},autoJoinCheck:function(){var t=tplug.modules.booth.attributes,e=tplug.modules.waitlist;return!e.isTheUserPlaying&&!e.isTheUserWaiting&&!t.isLocked&&e.length<50&&(API.djJoin(),!0)},customMentions:function(t){for(var e=[],s=0;s<tplug.settings.chatMentions.mentions.length;s++)t.msg.match(new RegExp("\\B("+tplug.settings.chatMentions.mentions[s].trim()+")\\b","gi"))&&e.indexOf(tplug.settings.chatMentions.mentions[s].trim())==-1&&e.push(tplug.settings.chatMentions.mentions[s].trim());if(e.length){t.sound="mention";for(var s=0;s<e.length;s++)t.message=t.message.replace(new RegExp(e[s],"gi"),'<span class="name">'+e[s]+"</span>")}},customEmotes:function(t){if(Object.keys(tplug.emotes).length){var e=t.msg.match(/:[^:\s]+:/g),s=Object.keys(tplug.emotes);if(e&&(e=e.filter(function(t){return s.indexOf(t.substring(1,t.length-1).toLowerCase())!=-1}),e.length)){var n=e.shift();if(s.indexOf(n.substring(1,n.length-1).toLowerCase())==-1)n=e.shift();else{var i=new Image;i.style.display="inline-block",i.style.verticalAlign="top",i.className="tp-emote",i.title=n,i.onload=function(){tplug.utils.scrollChat()},i.src=tplug.emotes[s[s.indexOf(n.substring(1,n.length-1).toLowerCase())]],t.message=t.message.replace(new RegExp(n,"gi"),i.outerHTML.replace(":","&#58;"))}t.msg=t.message.replace(/<(.|\n)*?>/gi,""),this.customEmotes(t)}}},hideVideo:function(){tplug.settings.hideVideo?$("#playback-container").hide():$("#playback-container").show()},chatImages:function(t){if(tplug.settings.chatImages){t.msg.match(/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]\.(?:jpe?g|gifv?|png|webm|mp4)(?![^\s]))/gi)}},scrollChat:function(t){var e=$("#chat-messages"),s=e.scrollTop()!=e[0].scrollHeight-e.height()-28;s&&e.scrollTop(e[0].scrollHeight)},tastyMojis:function(){var t="#chat-messages span.emoji-sizer{width:22px;height:22px;vertical-align:top}",e=$("#tp-tastymojis")[0];if(tplug.settings.tastyMojis.enabled)if(e)"ios"!=tplug.settings.tastyMojis.type?(e.innerHTML=t+'span.emoji-inner{background:url("https://catsaretasty.github.io/tastyplug/images/'+tplug.settings.tastyMojis.type+'.png")',tplug.utils.scrollChat()):"ios"==tplug.settings.tastyMojis.type&&e.innerHTML.trim()!=t&&(e.innerHTML=t);else if("ios"!=tplug.settings.tastyMojis.type){var s=new Image;s.style.display="none",s.onload=function(){$("head").append('\n                                <style id="tp-tastymojis">\n                                    '+t+'span.emoji-inner{background:url("https://catsaretasty.github.io/tastyplug/images/'+tplug.settings.tastyMojis.type+'.png")\n                                </style>\n                            '),tplug.utils.scrollChat()},s.src="https://catsaretasty.github.io/tastyplug/images/"+tplug.settings.tastyMojis.type+".png",s.remove()}else $("head").append('\n                                <style id="tp-tastymojis">\n                                    '+t+"\n                                </style>\n                            "),tplug.utils.scrollChat();else $("#tp-tastymojis").remove()},legacyChat:function(){var t=!1,e=function(e){t=void 0!==e?e:!t,t?0===$(".tastyplug_legacy_chat").length&&$("head").append('<link class="tastyplug_legacy_chat" rel="stylesheet" type="text/css" href="'+tplug.baseURL+'/styles/legacy_chat.min.css">'):$(".tastyplug_legacy_chat").remove()};return{toggle:e}}(),calculateETA:function(){var t=270,e=API.getTimeRemaining(),s=API.getWaitListPosition();return s!=-1?tplug.utils.ETAstring(t*s++ +e):""},ETAstring:function(t){var e=Math.floor(t/60/60),s=Math.floor(t/60-60*e),n=Math.floor(t-60*(60*e+s));return(e?e+"h":"")+(s?s+"m":"")+(n?n+"s":"0s")}},data:{save:function(){localStorage.tastyplug=JSON.stringify(tplug.settings)},load:function(){if(localStorage.tastyplug)try{var t=JSON.parse(localStorage.tastyplug);tplug.settings=$.extend({},tplug.settings,t)}catch(e){}}},ui:{load:function(t){if(t&&"css"==t)return $("head").append("<link id='tp-css' type='text/css' rel='stylesheet' href='${tplug.baseURL}/styles/tastyplug.min.css'/>");$("body").append('\n                <div id="tp-room" style="position: absolute; top: 54px; left: 0"></div>\n                <div id="tplug-ui">\n                    <button class="tp-mainbutton"><i class="tp-logo"></i></button>\n                    <div class="tp-menu" style="display: '+(tplug.settings.visible?"block":"none")+'"></div>\n                </div>\n            '),$("#tplug-ui").css(tplug.settings.uiPos),$(".tp-mainbutton").on({mouseenter:function(){tplug.modules.events.trigger("tooltip:show","Single click to hide/expand, double click to swap sides.",$(this))},mouseleave:function(){tplug.modules.events.trigger("tooltip:hide","Single click to hide/expand, double click to swap sides.",$(this))}});var e=API.getUser();tplug.ui.elements.forEach(function(t,s){if(t.type&&!(Math.max(e.role,e.gRole)<t.role))switch(t.type.toLowerCase()){case"primary":$("#tplug-ui .tp-menu").append('\n                            <div class="button '+t.type+'">\n                                <div class="toggle '+t.id+t.isEnabled()+'">\n                                    <i class="icon icon-check-purple"></i>\n                                    <span class="title">'+t.name+"\n                                    </span>\n                                </div>\n                            </div>\n                        "),$("#tplug-ui .tp-menu ."+t.id).on("click",function(e){t.onClick(e,t)}),t.hasOwnProperty("tooltip")&&$("#tplug-ui .tp-menu ."+t.id).on({mouseenter:function(){tplug.modules.events.trigger("tooltip:show",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)},mouseleave:function(){tplug.modules.events.trigger("tooltip:hide",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)}});break;case"withsettings":$("#tplug-ui .tp-menu").append('\n                            <div class="button '+t.type+'">\n                                <div class="toggle '+t.id+t.isEnabled()+'">\n                                    <i class="icon icon-check-purple"></i>\n                                    <span class="title">'+t.name+'\n                                    </span>\n                                </div>\n                                <div class="settings '+t.id+'">\n                                    <i class="icon icon-settings-grey"></i>\n                                </div>\n                            </div>\n                        '),$("#tplug-ui .tp-menu .toggle."+t.id).on("click",function(e){t.onClick(e,t)}),$(".settings."+t.id).on("click",function(e){t.onSettingsClick(e,t)}),t.hasOwnProperty("tooltip")&&$("#tplug-ui .tp-menu ."+t.id).on({mouseenter:function(){tplug.modules.events.trigger("tooltip:show",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)},mouseleave:function(){tplug.modules.events.trigger("tooltip:hide",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)}});break;case"subtype":$("#tplug-ui .tp-menu").append('\n                            <div class="button '+t.type+'">\n                                <div class="toggle '+t.id+t.isEnabled()+'">\n                                    <i class="icon icon-check-purple"></i>\n                                    <span class="title">'+t.name+'\n                                    </span>\n                                </div>\n                                <div class="expand '+t.id+'">\n                                    <i class="icon icon-drag-handle"></i>\n                                </div>\n                            </div>\n                            <div class="submenu '+t.id+'" style="display: none">\n                            </div>\n                        '),$("#tplug-ui .tp-menu .toggle."+t.id).on("click",function(e){t.onClick(e,t)}),$(".expand."+t.id).on("click",function(e){$(".submenu."+t.id).slideToggle()}),t.hasOwnProperty("tooltip")&&$("#tplug-ui .tp-menu ."+t.id).on({mouseenter:function(){tplug.modules.events.trigger("tooltip:show",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)},mouseleave:function(){tplug.modules.events.trigger("tooltip:hide",t.tooltip(),$(this),"15px"==tplug.settings.uiPos)}});break;case"secondary":$("#tplug-ui .tp-menu .submenu."+t.parent).append('\n                            <div class="button '+t.type+'">\n                                <div class="toggle '+t.id+t.isEnabled()+'">\n                                    <i class="icon icon-check-white"></i>\n                                    <span class="title">'+t.name+"\n                                    </span>\n                                </div>\n                            </div>\n                        "),$("#tplug-ui .tp-menu ."+t.id).on("click",function(e){t.onClick(e,t)});break;case"link":$("#tplug-ui .tp-menu").append('\n                            <a href="'+t.link+'" target="_blank">\n                                <div class="button '+t.type+'">\n                                    <i class="icon icon-playlist-small"></i>\n                                    <span class="title">'+t.name+"\n                                    </span>\n                                </div>\n                            </a>\n                        ")}});var s=function(t){tplug.settings.visible=!tplug.settings.visible,tplug.data.save(),tplug.settings.visible?($("#tplug-ui").append(tplug.ui.savedMenu),$(".tp-menu").slideToggle()):$(".tp-menu").slideToggle(400,function(){tplug.ui.savedMenu=$(".tp-menu").detach()})},n=function(t){var e={width:$(".app-right").position().left,height:$(".app-right").height()};e.width-230==parseInt(tplug.settings.uiPos.left)?tplug.settings.uiPos.left="15px":tplug.settings.uiPos.left=e.width-230+"px",$("#tplug-ui").css(tplug.settings.uiPos),tplug.modules.events.trigger("tooltip:hide"),tplug.data.save()};$(".tp-mainbutton").click(function(t){var e=this;setTimeout(function(){var n=parseInt($(e).data("double"),10);n>0?$(e).data("double",n-1):s.call(e,t)},300)}).dblclick(function(t){$(this).data("double",2),n.call(this,t)}),$(window).on("resize",tplug.ui.resize),tplug.settings.visible||(tplug.ui.savedMenu=$(".tp-menu").detach()),$("#waitlist-button").append('<span class="tp-eta" style="bottom:2px;left:45px;font-size:9px"></span>'),tplug.etaUpdate=setInterval(function(){$(".tp-eta").text(tplug.utils.calculateETA())},1e3)},unload:function(t){t&&"string"==typeof t&&$("#tp-css").remove(),$("#tplug-ui").remove(),$("#tp-room").remove(),$("#tp-tastymojis").remove(),$(".tp-dialog").remove(),$("#legacy-chat-stylesheet").remove(),clearInterval(tplug.etaUpdate),$(".tp-eta").remove(),$(window).off("resize",tplug.ui.resize)},elements:[{name:"Auto Woot",id:"autoWoot",type:"primary",role:0,onClick:function(t,e){tplug.settings.autoWoot=!tplug.settings.autoWoot;var s=API.getDJ(),n=API.getUser(),i=$("#tplug-ui ."+e.id);tplug.settings.autoWoot?(!n.vote&&s&&s.id!=n.id&&$("#woot").click(),i.addClass("enabled")):i.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.autoWoot?" enabled":""}},{name:"Auto Join",id:"autoJoin",type:"primary",role:0,onClick:function(t,e){tplug.settings.autoJoin=!tplug.settings.autoJoin;var s=$("#tplug-ui .tp-menu ."+e.id);tplug.settings.autoJoin?(tplug.utils.autoJoinCheck(),s.addClass("enabled")):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.autoJoin?" enabled":""}},{name:"Hide Video",id:"hideVideo",type:"primary",role:0,onClick:function(t,e){tplug.settings.hideVideo=!tplug.settings.hideVideo;var s=$("#tplug-ui ."+e.id);tplug.utils.hideVideo(),tplug.settings.hideVideo?s.addClass("enabled"):s.removeClass("enabled"),
tplug.data.save()},isEnabled:function(){return tplug.settings.hideVideo?" enabled":""}},t({name:"Legacy Chat",id:"legacyChat",type:"primary",role:0,tooltip:void 0,onClick:function(t,e){tplug.settings.legacyChat=!tplug.settings.legacyChat;var s=$("#tplug-ui ."+e.id);tplug.settings.legacyChat?s.addClass("enabled"):s.removeClass("enabled"),tplug.utils.legacyChat.toggle(tplug.settings.legacyChat),tplug.data.save()},isEnabled:function(){return tplug.settings.legacyChat?" enabled":""}},"tooltip",function(){return"Alternate styling for the chat, without badges."}),{name:"Booth Alert",id:"boothAlert",type:"primary",role:0,onClick:function(t,e){tplug.settings.boothAlert=!tplug.settings.boothAlert;var s=$("#tplug-ui ."+e.id);tplug.settings.boothAlert?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.boothAlert?" enabled":""},tooltip:function(){return"Get notified when you're about to play!"}},{name:"History Alert",id:"historyAlert",type:"primary",role:2,onClick:function(t,e){tplug.settings.historyAlert=!tplug.settings.historyAlert;var s=$("#tplug-ui ."+e.id);tplug.settings.historyAlert?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.historyAlert?" enabled":""},tooltip:function(){return"Get alerted when an user plays a song that is in the history!"}},{name:"Meh Tracker",id:"mehTracker",type:"primary",role:2,onClick:function(t,e){tplug.settings.mehTracker=!tplug.settings.mehTracker;var s=$("#tplug-ui ."+e.id);tplug.settings.mehTracker?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.mehTracker?" enabled":""}},{name:"Chat Images",id:"chatImages",type:"primary",role:0,onClick:function(t,e){tplug.settings.chatImages=!tplug.settings.chatImages;var s=$("#tplug-ui ."+e.id);tplug.settings.chatImages?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.chatImages?" enabled":""},tooltip:function(){return"Expands image links posted in chat."}},{name:"Custom Emotes",id:"customEmotes",type:"primary",role:0,onClick:function(t,e){tplug.settings.customEmotes=!tplug.settings.customEmotes;var s=$("#tplug-ui ."+e.id);tplug.settings.customEmotes?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.customEmotes?" enabled":""},tooltip:function(){return"Twitch Sub & Global, RCS & tastyPlug Emotes!"}},{name:"Chat Mentions",id:"chatMentions",type:"withSettings",role:0,onSettingsClick:function(t,e){var s='\n                        <div id="dialog-container" class="tp-dialog" style="display: block;" class="">\n                            <div id="dialog-tp-mentions" class="dialog mentions">\n                                <div class="dialog-frame">\n                                    <span class="title">'+e.id+'</span>\n                                    <i class="icon icon-dialog-close"></i>\n                                </div>\n                                <div class="dialog-body">\n                                    <div class="left">\n                                        <div class="mentions-box">\n                                            <div class="container empty">\n                                                <input type="text" placeholder="Type in your chat mentions here!" value="'+(tplug.settings.chatMentions.mentions.length?tplug.settings.chatMentions.mentions.join(", "):"")+'">\n                                            <div class="helpText">Separate your chat mentions with commas.</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="dialog-frame">\n                                <div class="button cancel">\n                                    <span>Cancel</span>\n                                </div>\n                                <div class="button clear">\n                                    <span>Clear</span>\n                                </div>\n                                <div class="button save">\n                                    <span>Save</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ';$("body").append(s),$(".tp-dialog .cancel, .tp-dialog .icon-dialog-close").on("click",function(t){$(".tp-dialog").remove()}),$(".tp-dialog .clear").on("click",function(t){$(".tp-dialog input")[0].value=""}).on({mouseenter:function(){tplug.modules.events.trigger("tooltip:show","Clears the text area",$(this),"15px"==tplug.settings.uiPos)},mouseleave:function(){tplug.modules.events.trigger("tooltip:hide","Clears the text area",$(this),"15px"==tplug.settings.uiPos)}}),$(".tp-dialog .save").on("click",function(t){tplug.settings.chatMentions.mentions=$(".tp-dialog input")[0].value.split(",").map(function(t){return t.trim()}).filter(function(t){return!!t.length&&1!=t.length}),tplug.ui.savedAlert=$(".tp-dialog").detach()})},onClick:function(t,e){tplug.settings.chatMentions.enabled=!tplug.settings.chatMentions.enabled;var s=$("#tplug-ui ."+e.id);tplug.settings.chatMentions.enabled?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.chatMentions.enabled?" enabled":""},tooltip:function(){return"Set up custom words to be notified when they're sent in chat."}},{name:"Join Notifications",id:"joinNotifications",type:"subtype",role:0,onClick:function(t,e){tplug.settings.joinNotifications.enabled=!tplug.settings.joinNotifications.enabled;var s=$("#tplug-ui ."+e.id+".toggle");tplug.settings.joinNotifications.enabled?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.joinNotifications.enabled?" enabled":""},tooltip:function(){return"Be notified when certain users join the room!"}},{name:"Ranks",id:"ranks",parent:"joinNotifications",type:"secondary",role:0,onClick:function(t,e){tplug.settings.joinNotifications.ranks=!tplug.settings.joinNotifications.ranks;var s=$("#tplug-ui ."+e.id);tplug.settings.joinNotifications.ranks?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.joinNotifications.ranks?" enabled":""}},{name:"Friends",id:"friends",parent:"joinNotifications",type:"secondary",role:0,onClick:function(t,e){tplug.settings.joinNotifications.friends=!tplug.settings.joinNotifications.friends;var s=$("#tplug-ui ."+e.id);tplug.settings.joinNotifications.friends?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.joinNotifications.friends?" enabled":""}},{name:"Level 1s",id:"levelOnes",parent:"joinNotifications",type:"secondary",role:2,onClick:function(t,e){tplug.settings.joinNotifications.levelOnes=!tplug.settings.joinNotifications.levelOnes;var s=$("#tplug-ui ."+e.id);tplug.settings.joinNotifications.levelOnes?s.addClass("enabled"):s.removeClass("enabled"),tplug.data.save()},isEnabled:function(){return tplug.settings.joinNotifications.levelOnes?" enabled":""}},{name:"tastyMojis",id:"tastyMojis",type:"subtype",role:0,onClick:function(t,e){tplug.settings.tastyMojis.enabled=!tplug.settings.tastyMojis.enabled;var s=$("#tplug-ui .toggle."+e.id);tplug.settings.tastyMojis.enabled?s.addClass("enabled"):s.removeClass("enabled"),tplug.utils.tastyMojis(),tplug.data.save()},isEnabled:function(){return tplug.settings.tastyMojis.enabled?" enabled":""},tooltip:function(){return"Change up (and enlarge) the native emojis of plug.dj"}},{name:"iOS",id:"ios",parent:"tastyMojis",type:"secondary",role:0,tooltip:void 0,onClick:function(t,e){tplug.settings.tastyMojis.type="ios";var s=$("#tplug-ui ."+e.id);$(".submenu."+e.parent).find(".enabled").removeClass("enabled"),s.addClass("enabled"),tplug.utils.tastyMojis(),tplug.data.save()},isEnabled:function(){return"ios"==tplug.settings.tastyMojis.type?" enabled":""}},{name:"Twitter",id:"twitter",parent:"tastyMojis",type:"secondary",role:0,tooltip:void 0,onClick:function(t,e){tplug.settings.tastyMojis.type="twitter";var s=$("#tplug-ui ."+e.id);$(".submenu."+e.parent).find(".enabled").removeClass("enabled"),s.addClass("enabled"),tplug.utils.tastyMojis(),tplug.data.save()},isEnabled:function(){return"twitter"==tplug.settings.tastyMojis.type?" enabled":""}},{name:"Emojione",id:"emojione",parent:"tastyMojis",type:"secondary",role:0,onClick:function(t,e){tplug.settings.tastyMojis.type="emojione";var s=$("#tplug-ui ."+e.id);$(".submenu."+e.parent).find(".enabled").removeClass("enabled"),s.addClass("enabled"),tplug.utils.tastyMojis()},isEnabled:function(){return"emojione"==tplug.settings.tastyMojis.type?" enabled":""}},{name:"Emotes List",id:"emotesList",type:"link",link:"https://emotes.tastycat.org",role:0}],resize:function(){var t={width:$(".app-right").position().left,height:$(".app-right").height()};15!=parseInt(tplug.settings.uiPos.left)&&(tplug.settings.uiPos.left=t.width-230+"px"),$("#tplug-ui").css(tplug.settings.uiPos),tplug.data.save()}},modules:{_array:[],require:window.require.s.contexts._.defined,media:null,events:null,booth:null,room:null,waitlist:null,lang:null,util:null,chat:null,init:function(){var t=this;$.each(this.require,function(e,s){s&&(t._array.push(s),t.waitlist=null!=s.isTheUserWaiting?s:t.waitlist,t.settings=s.settings?s:t.settings,t.events=s._events&&s._events["chat:receive"]?s:t.events,t.media=s.attributes&&s.attributes.hasOwnProperty("media")?s:t.media,t.booth=s.attributes&&s.attributes.hasOwnProperty("waitingDJs")?s:t.booth,t.room=s.attributes&&null!=s.attributes.joinTime?s:t.room,t.util=s.isorx?s:t.util,t.chat=s.chatView?s:t.chat)}),this.lang=this.require["lang/Lang"]}},startup:function(){console.time("Tastyplug Load Time"),tplug.ui.load("css"),tplug.data.load(),tplug.modules.init(),tplug.utils.loadEvents(),tplug.ui.load(),tplug.utils.loadEmotes(),tplug.utils.addChat({type:"startup",message:"v"+tplug.version+" <%= version_title =>",special:!0}),"undefined"==typeof API._dispatch&&(API._dispatch=API.dispatch,API.dispatch=function(t,e){API.trigger("_"+t,e),API._dispatch(t,e)}),console.timeEnd("Tastyplug Load Time");var t=API.getDJ(),e=API.getUser();tplug.settings.autoWoot&&t&&t.id!=e.id&&!e.vote&&$("#woot").click(),tplug.settings.autoJoin&&tplug.utils.autoJoinCheck(),tplug.settings.hideVideo&&tplug.utils.hideVideo(),tplug.settings.tastyMojis.enabled&&tplug.utils.tastyMojis(),tplug.settings.legacyChat&&tplug.utils.legacyChat.toggle(!0),window.tastyPlugShutDown=window.tplug.shutdown},shutdown:function(t){tplug.utils.legacyChat.toggle(!1),tplug.modules.events.trigger("tooltip:hide"),$("#playback-container").show(),tplug.data.save(),tplug.utils.unloadEvents(),tplug.ui.unload(),tplug.ui.unload("css"),tplug.data.save(),$(".cm.tp").remove();for(var e=$(".log"),s=0;s<e.length;s++){var n=e[s],i=n.lastChild.lastChild.lastChild.textContent;"tastyPlug shut down!"==i&&n.remove()}API.chatLog("tastyPlug shut down!"),tplug=void 0,delete window.tastyPlugShutDown}},window.tplug.startup()}),e(["tastyplug"])}();